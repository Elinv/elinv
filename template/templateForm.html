<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
  </head>

  <body>
    <div id="dialogCreacFormPreMold" title="Basic dialog">
      <input id="listForm" list="listFormPre" name="listForm" style="width:470px" />
      <datalist id="listFormPre">
        <option id="1" value="Form -> Submit y datalist"></option>
        <option id="2" value="Form -> Campos validation"></option>
        <option id="3" value="Form -> opcion 3"></option>
      </datalist>
    </div>

    <script>
      var dialogCreaFormPreMold = () => {
        //includeHTML('templateDialogoControlTexto.html');
        $(function() {
          $("#dialogCreacFormPreMold").dialog({
            open: function(event, ui) {
              //document.getElementById('inputDialCrearTexto').value = "";
            },
            close: function(event, ui) {},
            width: 500,
            autoOpen: false,
            modal: true,
            closeOnEscape: true,
            show: {
              effect: "blind",
              duration: 1000
            },
            hide: {
              effect: "explode",
              duration: 1000
            },
            buttons: {
              Aceptar: function() {
                let res = aceptar();
                if (res == 0) {
                  $(this).dialog("close");
                }
              },
              Salir: function() {
                $(this).dialog("close");
              }
            }
          });
          aceptar = function() {
            let sel = document.getElementById("listForm").value;
            // Case option 1
            let code = "";
            if (sel == "Form -> Submit y datalist") {
              // ------------------------------------------------
              let id = randId();
              // html que insertaremos
              code = `<div class="objMovible" oncontextmenu="zindexElemId='${id}';" contextmenu="zindexPos" id="${id}"
  style="position: absolute;z-index:10;width: 400px; height: 200px; left: 19px; top: 23px;">
  <fieldset style="width:100%;height:100%;">
  <legend id="fieldsetId">Label my fieldset</legend>
  <div class="objMovible" style="position: absolute;z-index:10;width:200px;height:20px; maxWidth: 600px; maxHheight: 60px;left: 19px; top: 23px;">
  <form action="https://www.reverbnation.com/elinv" method="get">
  <div class="objMovible" style="position: absolute;z-index:10;width:200px;height:20px; maxWidth: 600px; maxHheight: 60px;left: 19px; top: 23px;">
  <input list="Navegadores" name="Navegadores">
  </div>
  <datalist id="Navegadores">
    <option value="Internet Explorer">
    <option value="Firefox">
    <option value="Chrome">
    <option value="Opera">
    <option value="Safari">
  </datalist>
  <div class="objMovible" style="position: absolute; z-index: 10; width: 100px; height: 20px; left: 214px; top: 80px;">    
  <input type="submit">
  </div>
</form>
</div>
</div>
</fieldset></div>`.toDOM();
            }
            // Case option 2
            if (sel == "Form -> Campos validation") {
              // ------------------------------------------------
              let id = randId();
              // html que insertaremos
              code = `<div class="objMovible" oncontextmenu="zindexElemId='${id}';" contextmenu="zindexPos" id="${id}"
  style="position: absolute;z-index:10;width: 400px; height: 200px; left: 19px; top: 23px;">
    <div class="objMovible" id="hibjhp" style="position: absolute; z-index: 10; width: 260px; height: 320px; left: 43px; top: 29px;">
        <fieldset style="width:100%;height:100%;">
            <legend id="fieldsetId">Validando Campos</legend>  
            <div class="objMovible" id="alde" style="position: absolute;z-index:10;width: 400px; height: 200px; left: 19px; top: 23px;">              
            <form id="myform">
                <div class="objMovible" style="position: absolute; z-index: 10; width: 100px; height: 20px; left: 22px; top: 25px;">
                <input id="email" name="email" type="email" autofocus="" required="required" placeholder="Email" oninvalid="invalMsg(this,'Campo Email es requerido','Ingrese una dirección de mail válida!');" oninput="invalMsg(this,'Campo Email es requerido','Ingrese una dirección de mail válida!');">
                </div>
                <div class="objMovible" style="position: absolute; z-index: 10; width: 100px; height: 20px; left: 22px; top: 97px;">
                <input id="username" name="username" type="text" required="required" placeholder="Nombre de usuario" pattern="[a-zA-Z0-9_-]{6,12}" oninvalid="invalMsg(this,'Campo Username es requerido','Ingrese nombre de usuario válido!');" oninput="invalMsg(this,'Campo Username es requerido','Ingrese nombre de usuario válido!');">
                </div>
                <div class="objMovible" style="position: absolute; z-index: 10; width: 100px; height: 20px; left: 22px; top: 161px;">
                <input id="codepais" name="codepais" type="text" required="required" placeholder="Código Pais" pattern="[A-Za-z]{3}" oninvalid="invalMsg(this,'Campo Código País es requerido','Ingrese Código País válido!(3 letras)');" oninput="invalMsg(this,'Campo Código País es requerido','Ingrese Código País válido!(3 letras)');">
                </div>
                <div class="objMovible" style="position: absolute; z-index: 10; width: 100px; height: 20px; left: 25px; top: 233px;">
                <input id="password" name="password" type="password" required="required" placeholder="Password usuario" pattern="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" oninvalid="invalMsg(this,'Campo Password es requerido','Ingrese Password válido!(8 o + caracteres, numeros, mayúscula y minúscula)');" oninput="invalMsg(this,'Campo Password es requerido','Ingrese Password válido!(8 o + caracteres, numeros, mayúscula y minúscula)');">
                </div>
                <div class="objMovible" style="position: absolute; z-index: 10; width: 100px; height: 20px; left: 53px; top: 302px;">
                <input type="submit">
                </div>
            </form>
            </div>
        </fieldset>
    </div>
    </div>`.toDOM();

                // código javascript enviado al portapapeles
                let codeJS = `
        function invalMsg(elem, camReqMsg, valMsg) {
        if (elem.value == "") {
          elem.setCustomValidity(camReqMsg);
        } else if (elem.validity.typeMismatch) {
          elem.setCustomValidity(valMsg);
        } else if (elem.validity.patternMismatch) {
          elem.setCustomValidity(valMsg);
        } else {
          elem.setCustomValidity("");
        }
        return true;
      }`;
                copyTextToClipboard(codeJS.trim());
                alert("Codigo JS copiado al portapapeles!.")
            }
            // Case option 3
            if (sel == "Form -> opcion 3") {
              // ------------------------------------------------
              let id = randId();
              // html que insertaremos
              code = ``;
            }
            // añade el elemento creado y su contenido al DOM
            let currentDiv1 = document.getElementById("contenedor1");
            currentDiv1.appendChild(code);
            // falta enviar al portapapeles
            return 0;            
          };
        });
      };

    </script>
  </body>
</html>
